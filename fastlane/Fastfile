default_platform(:ios)


# 1
  desc "Create app on Apple Developer and App Store Connect sites"
# 2
  lane :create_app do
# 3
​    produce
  end

desc "Create adhoc build"
  lane :build_adhoc do
  increment_build_number
  gym(scheme: 'TestPods-QA', export_method: 'ad-hoc', output_directory: "./fastlane/builds/qa")
  end

desc "Create ipa"
  lane :build do
    # 1
    increment_build_number
    # 2
    gym
  end

desc "Testflight upload"
   lane :testflight do
      build
      pilot
   end

desc "Push to Appcenter"
   lane :appcenter_release do
      build_adhoc
      appcenter_upload(
    	api_token: "e557771c21f62b97467b34d35f166deaf59f0f8b",
    	owner_name: "bobby1212",
    	owner_type: "user",
    	app_name: "TestPods",
	file: "../TestPods/fastlane/builds/qa/TestPods.ipa",
	notify_testers: true,
	app_os: 'iOS'
      )
   end

desc "Take screenshots"
  lane :screenshot do
    snapshot
  end


desc "Upload to App Store"
  lane :upload do
    deliver
  end

desc “Create app, take screenshots, build and upload to App Store"
  lane :release_app do
    create_app
    build
    screenshot
    upload
  end